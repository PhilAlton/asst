<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<title>Output from Analytics</title>
	<!--This Document will be loaded by an html root directory page in order to load the analytics stream-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
			function logIn(username,password) {
                $.ajax({
                    type: 'GET',

                    url: "https://axspa.org.uk/asst/Analytics",
                    //Add the request header
                    contentType: 'application/x-www-form-urlencoded',
                    dataType: 'json',
                    beforeSend: function (xhr) {
                        xhr.setRequestHeader("Authorization", "Basic " + btoa(username + ":" + password));
                    },
                    success: function (data) {
                        console.log(data.content);
                        $('#AnalyticsData').html(data.AVERAGE_REQUESTS);
                    },
                    error: function (xhr, status, error) {
                        console.log(error);
                        $('#error').html("<b>Error whilst trying to retreive analytics data</b>").css('display', 'inline');
                    }
                });

			}
		</script>
</head>

<body>
	<div id="LogIn"  style="width: 600px; float:right">
		<form id="LogInForm">
			<label name="log in">Please Log in:</label><br/>
			<input type="text" name="username" id="userNameBx" placeholder="Enter Username"/><br/>
			<input type="text" name="password" id="userPassBx" placeholder="Enter Password"/><br/>
			<input type="button" onclick="logIn(LogInForm.userNameBx.value,LogInForm.userPassBx.value)" value="Submit"/>
		</form>
	</div>
	<div id="AnalyticsData"></div>
    <div id="error"/>
</body>
</html>